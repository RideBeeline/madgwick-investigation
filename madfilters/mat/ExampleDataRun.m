% ExampleDataRun.m%% This script loads the original IMU data from Madgwick's example and runs it % through the filter. It then exports the IMU data, resulting quaternions,% and the used beta and frequency to an hdf5 file so it can be easily imported% in Python.addpath('madgwick_algorithm_matlab/@MadgwickAHRS', 'madgwick_algorithm_matlab/quaternion_library'); clear;load madgwick_algorithm_matlab/ExampleData.mat;acc = Accelerometer;gyr = Gyroscope * (pi/180);mag = Magnetometer;frequency = 1/(time(2)-time(1)); % 256 Hzbeta = 0.1;q0 = [1 0 0 0];AHRS = MadgwickAHRS('SamplePeriod', 1/frequency, 'Beta', beta, 'Quaternion', q0);Q = zeros(length(acc), 4);for t = 1:length(acc)    AHRS.Update(gyr(t,:), acc(t,:), mag(t,:));    Q(t, :) = AHRS.Quaternion;endsave ExampleData.hdf5 time acc gyr mag Q beta frequency -hdf5;